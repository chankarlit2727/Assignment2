<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>HeartBeat</title>

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap4.min.css"> -->




</head>
<body>
<div class="container-xl">
	<div class="table-responsive">
		<div class="table-wrapper">
			<div class="table-title">
				<div class="row">
					<div class="col-sm-6">
						<h2>Manage <b>Heartbeat</b></h2>
					</div>
					<div class="col-sm-6">
						<a href="createLink/" class="btn btn-success"><i class="material-icons">&#xE15C;</i> <span>Add new link</span></a>					
					</div>
				</div>
			</div>
            <br><br>
    
			<table id="myTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
				<thead>
					<tr>
						<th>Address Name</th>
						<th>Status</th>
						<th></th>
					</tr>
				</thead>
				<tbody id="display">
					
				</tbody>
			</table>
		
		</div>
	</div>        
</div>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<!-- <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap4.min.js"></script> -->
<!-- <script type="text/javascript">
    $(document).ready(function () {
        $('#myTable').DataTable();
        $(".dataTables_empty").empty();
    });
</script> -->

        

        <script>
            $(document).ready(function(){

                setInterval(function(){
                    $.ajax({
                        type:'GET',
                        url : "{% url 'getLink' %}",
                        success: function(response){
                            $("#display").empty();
                            
                            for (var key in response.link)
                            {
                                console.log(response.link[key].link_name);
                                var temp = "<tr><td>" + response.link[key].link_name + "</td><td>"
                                    + response.link[key].link_status_code
                                    + "</td><td><a href='updateLink/" + response.link[key].id 
                                    + "'><button type='button' class='btn btn-info'>Update</button></a></td><td><a href='deleteLink/" 
                                    + response.link[key].id 
                                    + "'><button type='button' class='btn btn-danger'>Delete</button></a></td></tr>";
                                    // "<tr><th scope='row'>" + response.link[key].link_text + "</th><td>" 
                                    // + response.link[key].link_status_code 
                                    // + 
                                        
                                    $("#display").append(temp);
                                    
                            }
                        },
                        error: function(response){
                            alert("No data found")
                        }
                    });
                },2000);
            });
        </script>

        <script>
            // your custom ajax request here
            function ajaxRequest(params) {
            var url = 'getLink'
            $.get(url + '?' + $.param(params.data)).then(function (res) {
                params.success(res)
            })
            }
        </script>

</body>
</html>